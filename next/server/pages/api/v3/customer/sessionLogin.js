"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/v3/customer/sessionLogin";
exports.ids = ["pages/api/v3/customer/sessionLogin"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "nookies":
/*!**************************!*\
  !*** external "nookies" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("nookies");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stripe");

/***/ }),

/***/ "(api)/./components/OnServer.ts":
/*!********************************!*\
  !*** ./components/OnServer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ServerInstance\": () => (/* binding */ ServerInstance),\n/* harmony export */   \"OnServer\": () => (/* binding */ OnServer),\n/* harmony export */   \"ServerSideProps\": () => (/* binding */ ServerSideProps),\n/* harmony export */   \"Parser\": () => (/* binding */ Parser)\n/* harmony export */ });\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nookies */ \"nookies\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nookies__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(stripe__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(api)/./components/utils.ts\");\n\n\n\n\nconst isSSR = \"undefined\" === \"undefined\";\nclass ServerInstance {\n    static get stripe() {\n        if (!isSSR) throw new Error(\"server only importable\");\n        return new (stripe__WEBPACK_IMPORTED_MODULE_1___default())(process.env.STRIPE_SECRET_KEY, {\n            apiVersion: \"2020-08-27\"\n        });\n    }\n    static get firebase() {\n        if (!isSSR) throw new Error(\"server only importable\");\n        if ((firebase_admin__WEBPACK_IMPORTED_MODULE_2___default().apps.length) === 0) {\n            const serviceAccount = {\n                projectId: process.env.FIREBASE_ADMIN_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_ADMIN_CLIENT_EMAIL,\n                privateKey: (process.env.FIREBASE_ADMIN_PRIVATE_KEY || \"\").replace(/\\\\n/g, \"\\n\")\n            };\n            const option = {\n                projectId: \"airplane-e018c\",\n                credential: firebase_admin__WEBPACK_IMPORTED_MODULE_2___default().credential.cert(serviceAccount)\n            };\n            const app = firebase_admin__WEBPACK_IMPORTED_MODULE_2___default().initializeApp(option);\n            return app;\n        } else {\n            return (firebase_admin__WEBPACK_IMPORTED_MODULE_2___default().apps[0]);\n        }\n    }\n    static get userColRef() {\n        return this.firebase.firestore().collection(\"users\").withConverter({\n            toFirestore (post) {\n                return {\n                    createdAt: post.createdAt,\n                    isPremium: post.isPremium\n                };\n            },\n            fromFirestore (snapshot) {\n                var ref, ref1, ref2, ref3, ref4, ref5;\n                const data = snapshot.data();\n                console.log(data.createdAt.toString());\n                new Date().toJSON();\n                return {\n                    id: snapshot.id,\n                    createdAt: ((ref = data.createdAt) === null || ref === void 0 ? void 0 : (ref1 = ref.toDate) === null || ref1 === void 0 ? void 0 : ref1.call(ref)) || null,\n                    isPremium: data.isPremium,\n                    lcName: data.lcName,\n                    name: data.name,\n                    note: data.note,\n                    paymentId: data.paymentId,\n                    updatedAt: ((ref2 = data.updatedAt) === null || ref2 === void 0 ? void 0 : (ref3 = ref2.toDate) === null || ref3 === void 0 ? void 0 : ref3.call(ref2)) || null,\n                    sei: data.sei,\n                    mei: data.mei,\n                    birth: ((ref4 = data.birth) === null || ref4 === void 0 ? void 0 : (ref5 = ref4.toDate) === null || ref5 === void 0 ? void 0 : ref5.call(ref4)) || null\n                };\n            }\n        });\n    }\n}\nclass OnServer {\n    static async getClientFromToken(ctx) {\n        try {\n            var ref, ref6;\n            if (!isSSR) throw \"is Not SSR\";\n            const cookies = nookies__WEBPACK_IMPORTED_MODULE_0___default().get(ctx); // ブラウザ側で設定したCookieを取得\n            console.log(\"cookies are \", cookies);\n            const session = ((ref = cookies.__session) === null || ref === void 0 ? void 0 : (ref6 = ref.toString) === null || ref6 === void 0 ? void 0 : ref6.call(ref)) || \"\";\n            console.log(\"session is\", cookies);\n            if (!session) throw \"empty cookie\";\n            const { uid  } = await ServerInstance.firebase.auth().verifySessionCookie(session, true).catch((e)=>{\n                console.log(e);\n                throw \"Verify failed\";\n            });\n            if (!uid) throw \"Verify failed\";\n            const user = await ServerInstance.userColRef.doc(uid).get().then((doc)=>doc.data()\n            ).catch(()=>{\n                throw \"No User\";\n            });\n            return user;\n        } catch (e) {\n            console.log(e);\n            return null;\n        }\n    }\n}\nclass ServerSideProps {\n}\nServerSideProps.CustomerOnly = async (ctx)=>{\n    const user = await OnServer.getClientFromToken(ctx);\n    return user ? {\n        props: {},\n        redirect: {\n            destination: \"/user/\"\n        }\n    } : {\n        props: {}\n    };\n};\nServerSideProps.UserOnly = async (ctx)=>{\n    const user = await OnServer.getClientFromToken(ctx);\n    return user ? {\n        props: {\n            user: _utils__WEBPACK_IMPORTED_MODULE_3__.Utl.JSONParse(user)\n        }\n    } : {\n        props: {},\n        redirect: {\n            permanent: true,\n            destination: \"/login/\"\n        }\n    };\n};\nclass Parser {\n    static async getStripeUserFromToken(token) {\n        const [uid, hash] = Buffer.from(token, \"base64\").toString().split(\":\");\n        const snapshot = await ServerInstance.firebase.firestore().collection(\"paymentKeyMaps\").where(\"hash\", \"==\", hash).where(\"uid\", \"==\", uid).get();\n        const picked = snapshot.docs.map((x)=>x.data()\n        );\n        return picked[0];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxDQUFDLENBQUssTUFBRSxDQUFJLEtBQUV2QixHQUFHLEVBQUVILEdBQUc7UUFDN0ksS0FBSyxDQUFDMkIsTUFBTSxHQUFHaEQsUUFBUSxDQUFDaUQsSUFBSSxDQUFDQyxHQUFHLEVBQUVDLENBQUMsR0FBS0EsQ0FBQyxDQUFDbEQsSUFBSTs7UUFDOUMsTUFBTSxDQUFDK0MsTUFBTSxDQUFDLENBQUM7SUFDakIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudHMvT25TZXJ2ZXIudHM/MjhkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHMsIEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IG5vb2tpZXMgZnJvbSBcIm5vb2tpZXNcIjtcbmltcG9ydCBTdHJpcGUgZnJvbSBcInN0cmlwZVwiO1xuaW1wb3J0IGFkbWluLCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UtYWRtaW5cIjtcbmltcG9ydCB7IERvY3VtZW50RGF0YSB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCB9IGZyb20gXCJmaXJlYmFzZS1mdW5jdGlvbnMvdjEvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBVdGwgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zdCBpc1NTUiA9IHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCI7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJJbnN0YW5jZSB7XG4gIHN0YXRpYyBnZXQgc3RyaXBlKCkge1xuICAgIGlmICghaXNTU1IpIHRocm93IG5ldyBFcnJvcihcInNlcnZlciBvbmx5IGltcG9ydGFibGVcIik7XG4gICAgcmV0dXJuIG5ldyBTdHJpcGUocHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVksIHtcbiAgICAgIGFwaVZlcnNpb246IFwiMjAyMC0wOC0yN1wiLFxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGdldCBmaXJlYmFzZSgpIHtcbiAgICBpZiAoIWlzU1NSKSB0aHJvdyBuZXcgRXJyb3IoXCJzZXJ2ZXIgb25seSBpbXBvcnRhYmxlXCIpO1xuICAgIGlmIChhZG1pbi5hcHBzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3Qgc2VydmljZUFjY291bnQ6IGFkbWluLlNlcnZpY2VBY2NvdW50ID0ge1xuICAgICAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQsXG4gICAgICAgIGNsaWVudEVtYWlsOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9BRE1JTl9DTElFTlRfRU1BSUwsXG4gICAgICAgIHByaXZhdGVLZXk6IChwcm9jZXNzLmVudi5GSVJFQkFTRV9BRE1JTl9QUklWQVRFX0tFWSB8fCBcIlwiKS5yZXBsYWNlKC9cXFxcbi9nLCBcIlxcblwiKSxcbiAgICAgIH07XG4gICAgICBjb25zdCBvcHRpb246IGFkbWluLkFwcE9wdGlvbnMgPSB7XG4gICAgICAgIHByb2plY3RJZDogXCJhaXJwbGFuZS1lMDE4Y1wiLFxuICAgICAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoc2VydmljZUFjY291bnQpLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGFwcCA9IGFkbWluLmluaXRpYWxpemVBcHAob3B0aW9uKTtcbiAgICAgIHJldHVybiBhcHA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhZG1pbi5hcHBzWzBdO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgdXNlckNvbFJlZigpIHtcbiAgICByZXR1cm4gdGhpcy5maXJlYmFzZVxuICAgICAgLmZpcmVzdG9yZSgpXG4gICAgICAuY29sbGVjdGlvbihcInVzZXJzXCIpXG4gICAgICAud2l0aENvbnZlcnRlcih7XG4gICAgICAgIHRvRmlyZXN0b3JlKHBvc3Q6IFVzZXJFbnRpdHkpOiBEb2N1bWVudERhdGEge1xuICAgICAgICAgIHJldHVybiB7IGNyZWF0ZWRBdDogcG9zdC5jcmVhdGVkQXQsIGlzUHJlbWl1bTogcG9zdC5pc1ByZW1pdW0gfTtcbiAgICAgICAgfSxcbiAgICAgICAgZnJvbUZpcmVzdG9yZShzbmFwc2hvdDogUXVlcnlEb2N1bWVudFNuYXBzaG90KTogVXNlckVudGl0eSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHNuYXBzaG90LmRhdGEoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmNyZWF0ZWRBdC50b1N0cmluZygpKTtcbiAgICAgICAgICBuZXcgRGF0ZSgpLnRvSlNPTigpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogc25hcHNob3QuaWQsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0Py50b0RhdGU/LigpIHx8IG51bGwsXG4gICAgICAgICAgICBpc1ByZW1pdW06IGRhdGEuaXNQcmVtaXVtLFxuICAgICAgICAgICAgbGNOYW1lOiBkYXRhLmxjTmFtZSxcbiAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgICAgIG5vdGU6IGRhdGEubm90ZSxcbiAgICAgICAgICAgIHBheW1lbnRJZDogZGF0YS5wYXltZW50SWQsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGU/LigpIHx8IG51bGwsXG4gICAgICAgICAgICBzZWk6IGRhdGEuc2VpLFxuICAgICAgICAgICAgbWVpOiBkYXRhLm1laSxcbiAgICAgICAgICAgIGJpcnRoOiBkYXRhLmJpcnRoPy50b0RhdGU/LigpIHx8IG51bGwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPblNlcnZlciB7XG4gIHN0YXRpYyBhc3luYyBnZXRDbGllbnRGcm9tVG9rZW4oY3R4OiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaXNTU1IpIHRocm93IFwiaXMgTm90IFNTUlwiO1xuICAgICAgY29uc3QgY29va2llcyA9IG5vb2tpZXMuZ2V0KGN0eCk7IC8vIOODluODqeOCpuOCtuWBtOOBp+ioreWumuOBl+OBn0Nvb2tpZeOCkuWPluW+l1xuICAgICAgY29uc29sZS5sb2coXCJjb29raWVzIGFyZSBcIiwgY29va2llcyk7XG4gICAgICBjb25zdCBzZXNzaW9uID0gY29va2llcy5fX3Nlc3Npb24/LnRvU3RyaW5nPy4oKSB8fCBcIlwiO1xuICAgICAgY29uc29sZS5sb2coXCJzZXNzaW9uIGlzXCIsIGNvb2tpZXMpO1xuICAgICAgaWYgKCFzZXNzaW9uKSB0aHJvdyBcImVtcHR5IGNvb2tpZVwiO1xuICAgICAgY29uc3QgeyB1aWQgfSA9IGF3YWl0IFNlcnZlckluc3RhbmNlLmZpcmViYXNlXG4gICAgICAgIC5hdXRoKClcbiAgICAgICAgLnZlcmlmeVNlc3Npb25Db29raWUoc2Vzc2lvbiwgdHJ1ZSlcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgdGhyb3cgXCJWZXJpZnkgZmFpbGVkXCI7XG4gICAgICAgIH0pO1xuICAgICAgaWYgKCF1aWQpIHRocm93IFwiVmVyaWZ5IGZhaWxlZFwiO1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFNlcnZlckluc3RhbmNlLnVzZXJDb2xSZWZcbiAgICAgICAgLmRvYyh1aWQpXG4gICAgICAgIC5nZXQoKVxuICAgICAgICAudGhlbigoZG9jKSA9PiBkb2MuZGF0YSgpKVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHRocm93IFwiTm8gVXNlclwiO1xuICAgICAgICB9KTtcbiAgICAgIHJldHVybiB1c2VyO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXJ2ZXJTaWRlUHJvcHMge1xuICBzdGF0aWMgQ3VzdG9tZXJPbmx5OiBHZXRTZXJ2ZXJTaWRlUHJvcHMgPSBhc3luYyAoY3R4KSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IE9uU2VydmVyLmdldENsaWVudEZyb21Ub2tlbihjdHgpO1xuICAgIHJldHVybiB1c2VyID8geyBwcm9wczoge30sIHJlZGlyZWN0OiB7IGRlc3RpbmF0aW9uOiBcIi91c2VyL1wiIH0gfSA6IHsgcHJvcHM6IHt9IH07XG4gIH07XG5cbiAgc3RhdGljIFVzZXJPbmx5OiBHZXRTZXJ2ZXJTaWRlUHJvcHMgPSBhc3luYyAoY3R4KSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IE9uU2VydmVyLmdldENsaWVudEZyb21Ub2tlbihjdHgpO1xuICAgIHJldHVybiB1c2VyID8geyBwcm9wczogeyB1c2VyOiBVdGwuSlNPTlBhcnNlKHVzZXIpIH0gfSA6IHsgcHJvcHM6IHt9LCByZWRpcmVjdDogeyBwZXJtYW5lbnQ6IHRydWUsIGRlc3RpbmF0aW9uOiBcIi9sb2dpbi9cIiB9IH07XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBQYXJzZXIge1xuICBzdGF0aWMgYXN5bmMgZ2V0U3RyaXBlVXNlckZyb21Ub2tlbih0b2tlbjogc3RyaW5nKSB7XG4gICAgY29uc3QgW3VpZCwgaGFzaF0gPSBCdWZmZXIuZnJvbSh0b2tlbiwgXCJiYXNlNjRcIikudG9TdHJpbmcoKS5zcGxpdChcIjpcIik7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBTZXJ2ZXJJbnN0YW5jZS5maXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKFwicGF5bWVudEtleU1hcHNcIikud2hlcmUoXCJoYXNoXCIsIFwiPT1cIiwgaGFzaCkud2hlcmUoXCJ1aWRcIiwgXCI9PVwiLCB1aWQpLmdldCgpO1xuICAgIGNvbnN0IHBpY2tlZCA9IHNuYXBzaG90LmRvY3MubWFwKCh4KSA9PiB4LmRhdGEoKSk7XG4gICAgcmV0dXJuIHBpY2tlZFswXTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIm5vb2tpZXMiLCJTdHJpcGUiLCJhZG1pbiIsIlV0bCIsImlzU1NSIiwiU2VydmVySW5zdGFuY2UiLCJzdHJpcGUiLCJFcnJvciIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsImFwaVZlcnNpb24iLCJmaXJlYmFzZSIsImFwcHMiLCJsZW5ndGgiLCJzZXJ2aWNlQWNjb3VudCIsInByb2plY3RJZCIsIkZJUkVCQVNFX0FETUlOX1BST0pFQ1RfSUQiLCJjbGllbnRFbWFpbCIsIkZJUkVCQVNFX0FETUlOX0NMSUVOVF9FTUFJTCIsInByaXZhdGVLZXkiLCJGSVJFQkFTRV9BRE1JTl9QUklWQVRFX0tFWSIsInJlcGxhY2UiLCJvcHRpb24iLCJjcmVkZW50aWFsIiwiY2VydCIsImFwcCIsImluaXRpYWxpemVBcHAiLCJ1c2VyQ29sUmVmIiwiZmlyZXN0b3JlIiwiY29sbGVjdGlvbiIsIndpdGhDb252ZXJ0ZXIiLCJ0b0ZpcmVzdG9yZSIsInBvc3QiLCJjcmVhdGVkQXQiLCJpc1ByZW1pdW0iLCJmcm9tRmlyZXN0b3JlIiwic25hcHNob3QiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInRvU3RyaW5nIiwiRGF0ZSIsInRvSlNPTiIsImlkIiwidG9EYXRlIiwibGNOYW1lIiwibmFtZSIsIm5vdGUiLCJwYXltZW50SWQiLCJ1cGRhdGVkQXQiLCJzZWkiLCJtZWkiLCJiaXJ0aCIsIk9uU2VydmVyIiwiZ2V0Q2xpZW50RnJvbVRva2VuIiwiY3R4IiwiY29va2llcyIsImdldCIsInNlc3Npb24iLCJfX3Nlc3Npb24iLCJ1aWQiLCJhdXRoIiwidmVyaWZ5U2Vzc2lvbkNvb2tpZSIsImNhdGNoIiwiZSIsInVzZXIiLCJkb2MiLCJ0aGVuIiwiU2VydmVyU2lkZVByb3BzIiwiQ3VzdG9tZXJPbmx5IiwicHJvcHMiLCJyZWRpcmVjdCIsImRlc3RpbmF0aW9uIiwiVXNlck9ubHkiLCJKU09OUGFyc2UiLCJwZXJtYW5lbnQiLCJQYXJzZXIiLCJnZXRTdHJpcGVVc2VyRnJvbVRva2VuIiwidG9rZW4iLCJoYXNoIiwiQnVmZmVyIiwiZnJvbSIsInNwbGl0Iiwid2hlcmUiLCJwaWNrZWQiLCJkb2NzIiwibWFwIiwieCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./components/OnServer.ts\n");

/***/ }),

/***/ "(api)/./components/utils.ts":
/*!*****************************!*\
  !*** ./components/utils.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Utl\": () => (/* binding */ Utl)\n/* harmony export */ });\nclass Utl {\n    static JSONParse(data) {\n        return JSON.parse(JSON.stringify(data));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb21wb25lbnRzL3V0aWxzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxHQUFHO1dBQ1BDLFNBQVMsQ0FBQ0MsSUFBUyxFQUFFLENBQUM7UUFDM0IsTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxTQUFTLENBQUNILElBQUk7SUFDdkMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2NvbXBvbmVudHMvdXRpbHMudHM/MmQ1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVXRsIHtcbiAgc3RhdGljIEpTT05QYXJzZShkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJVdGwiLCJKU09OUGFyc2UiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./components/utils.ts\n");

/***/ }),

/***/ "(api)/./pages/api/v3/customer/sessionLogin.ts":
/*!***********************************************!*\
  !*** ./pages/api/v3/customer/sessionLogin.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _components_OnServer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../components/OnServer */ \"(api)/./components/OnServer.ts\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nookies */ \"nookies\");\n/* harmony import */ var nookies__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(nookies__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst handler = async (req, res)=>{\n    // Get the ID token passed and the CSRF token.\n    const idToken = req.body.idToken.toString();\n    console.log(\"idToekn\", idToken);\n    //   const csrfToken = req.body.csrfToken.toString();\n    // Guard against CSRF attacks.\n    //   if (csrfToken !== req.cookies.csrfToken) {\n    //     res.status(401).send(\"UNAUTHORIZED REQUEST!\");\n    //     return;\n    //   }\n    // Set session expiration to 5 days.\n    const expiresIn = 1000 * 60 * 60 * 24 * 5;\n    // Create the session cookie. This will also verify the ID token in the process.\n    // The session cookie will have the same claims as the ID token.\n    // To only allow session cookie setting on recent sign-in, auth_time in ID token\n    // can be checked to ensure user was recently signed in before creating a session cookie.\n    await _components_OnServer__WEBPACK_IMPORTED_MODULE_0__.ServerInstance.firebase.auth().createSessionCookie(idToken, {\n        expiresIn\n    }).then((sessionCookie)=>{\n        // Set cookie policy for session cookie.\n        const options = {\n            maxAge: expiresIn,\n            httpOnly: true,\n            secure: \"development\" !== \"development\",\n            path: \"/\",\n            domain:  false ? 0 : \"\",\n            expiresIn: expiresIn / 1000\n        };\n        (0,nookies__WEBPACK_IMPORTED_MODULE_1__.setCookie)({\n            res\n        }, \"__session\", sessionCookie, options);\n        res.status(200).send({\n            status: \"success\"\n        });\n        return;\n    }, (error)=>{\n        console.error(\"going crazy\");\n        res.status(401).send(\"UNAUTHORIZED REQUEST!\");\n        return;\n    }).catch((e)=>{\n        console.error(e);\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdjMvY3VzdG9tZXIvc2Vzc2lvbkxvZ2luLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDZ0U7QUFDN0I7QUFFbkMsS0FBSyxDQUFDRSxPQUFPLFVBQTBCQyxHQUFHLEVBQUVDLEdBQUcsR0FBSyxDQUFDO0lBQ25ELEVBQThDO0lBQzlDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHRixHQUFHLENBQUNHLElBQUksQ0FBQ0QsT0FBTyxDQUFDRSxRQUFRO0lBQ3pDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFTLFVBQUVKLE9BQU87SUFDOUIsRUFBcUQ7SUFDckQsRUFBOEI7SUFDOUIsRUFBK0M7SUFDL0MsRUFBcUQ7SUFDckQsRUFBYztJQUNkLEVBQU07SUFDTixFQUFvQztJQUNwQyxLQUFLLENBQUNLLFNBQVMsR0FBRyxJQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztJQUN6QyxFQUFnRjtJQUNoRixFQUFnRTtJQUNoRSxFQUFnRjtJQUNoRixFQUF5RjtJQUN6RixLQUFLLENBQUNWLDhFQUNDLEdBQ0phLG1CQUFtQixDQUFDUixPQUFPLEVBQUUsQ0FBQztRQUFDSyxTQUFTO0lBQUMsQ0FBQyxFQUMxQ0ksSUFBSSxFQUNGQyxhQUFhLEdBQUssQ0FBQztRQUNsQixFQUF3QztRQUN4QyxLQUFLLENBQUNDLE9BQU8sR0FBRyxDQUFDO1lBQ2ZDLE1BQU0sRUFBRVAsU0FBUztZQUNqQlEsUUFBUSxFQUFFLElBQUk7WUFDZEMsTUFBTSxFQTdCaEIsQ0FBYSxpQkE2QjhCLENBQWE7WUFDOUNDLElBQUksRUFBRSxDQUFHO1lBQ1RDLE1BQU0sRUEvQmhCLE1BK0J1RCxHQUFHQyxDQUE4QixHQUFHLENBQUU7WUFDbkZaLFNBQVMsRUFBRUEsU0FBUyxHQUFHLElBQUk7UUFDN0IsQ0FBQztRQUNEVCxrREFBUyxDQUFDLENBQUM7WUFBQ0csR0FBRztRQUFDLENBQUMsRUFBRSxDQUFXLFlBQUVXLGFBQWEsRUFBRUMsT0FBTztRQUN0RFosR0FBRyxDQUFDcUIsTUFBTSxDQUFDLEdBQUcsRUFBRUMsSUFBSSxDQUFDLENBQUM7WUFBQ0QsTUFBTSxFQUFFLENBQVM7UUFBQyxDQUFDO1FBQzFDLE1BQU07SUFDUixDQUFDLEdBQ0FFLEtBQUssR0FBSyxDQUFDO1FBQ1ZuQixPQUFPLENBQUNtQixLQUFLLENBQUMsQ0FBYTtRQUMzQnZCLEdBQUcsQ0FBQ3FCLE1BQU0sQ0FBQyxHQUFHLEVBQUVDLElBQUksQ0FBQyxDQUF1QjtRQUM1QyxNQUFNO0lBQ1IsQ0FBQyxFQUVGRSxLQUFLLEVBQUVDLENBQUMsR0FBSyxDQUFDO1FBQ2JyQixPQUFPLENBQUNtQixLQUFLLENBQUNFLENBQUM7SUFDakIsQ0FBQztBQUNMLENBQUM7QUFDRCxpRUFBZTNCLE9BQU8sRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS92My9jdXN0b21lci9zZXNzaW9uTG9naW4udHM/ZmI1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpSGFuZGxlciB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBTZXJ2ZXJJbnN0YW5jZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb21wb25lbnRzL09uU2VydmVyXCI7XG5pbXBvcnQgeyBzZXRDb29raWUgfSBmcm9tIFwibm9va2llc1wiO1xuXG5jb25zdCBoYW5kbGVyOiBOZXh0QXBpSGFuZGxlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAvLyBHZXQgdGhlIElEIHRva2VuIHBhc3NlZCBhbmQgdGhlIENTUkYgdG9rZW4uXG4gIGNvbnN0IGlkVG9rZW4gPSByZXEuYm9keS5pZFRva2VuLnRvU3RyaW5nKCk7XG4gIGNvbnNvbGUubG9nKFwiaWRUb2VrblwiLCBpZFRva2VuKTtcbiAgLy8gICBjb25zdCBjc3JmVG9rZW4gPSByZXEuYm9keS5jc3JmVG9rZW4udG9TdHJpbmcoKTtcbiAgLy8gR3VhcmQgYWdhaW5zdCBDU1JGIGF0dGFja3MuXG4gIC8vICAgaWYgKGNzcmZUb2tlbiAhPT0gcmVxLmNvb2tpZXMuY3NyZlRva2VuKSB7XG4gIC8vICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZChcIlVOQVVUSE9SSVpFRCBSRVFVRVNUIVwiKTtcbiAgLy8gICAgIHJldHVybjtcbiAgLy8gICB9XG4gIC8vIFNldCBzZXNzaW9uIGV4cGlyYXRpb24gdG8gNSBkYXlzLlxuICBjb25zdCBleHBpcmVzSW4gPSAxMDAwICogNjAgKiA2MCAqIDI0ICogNTtcbiAgLy8gQ3JlYXRlIHRoZSBzZXNzaW9uIGNvb2tpZS4gVGhpcyB3aWxsIGFsc28gdmVyaWZ5IHRoZSBJRCB0b2tlbiBpbiB0aGUgcHJvY2Vzcy5cbiAgLy8gVGhlIHNlc3Npb24gY29va2llIHdpbGwgaGF2ZSB0aGUgc2FtZSBjbGFpbXMgYXMgdGhlIElEIHRva2VuLlxuICAvLyBUbyBvbmx5IGFsbG93IHNlc3Npb24gY29va2llIHNldHRpbmcgb24gcmVjZW50IHNpZ24taW4sIGF1dGhfdGltZSBpbiBJRCB0b2tlblxuICAvLyBjYW4gYmUgY2hlY2tlZCB0byBlbnN1cmUgdXNlciB3YXMgcmVjZW50bHkgc2lnbmVkIGluIGJlZm9yZSBjcmVhdGluZyBhIHNlc3Npb24gY29va2llLlxuICBhd2FpdCBTZXJ2ZXJJbnN0YW5jZS5maXJlYmFzZVxuICAgIC5hdXRoKClcbiAgICAuY3JlYXRlU2Vzc2lvbkNvb2tpZShpZFRva2VuLCB7IGV4cGlyZXNJbiB9KVxuICAgIC50aGVuKFxuICAgICAgKHNlc3Npb25Db29raWUpID0+IHtcbiAgICAgICAgLy8gU2V0IGNvb2tpZSBwb2xpY3kgZm9yIHNlc3Npb24gY29va2llLlxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIG1heEFnZTogZXhwaXJlc0luLFxuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiZGV2ZWxvcG1lbnRcIixcbiAgICAgICAgICBwYXRoOiBcIi9cIixcbiAgICAgICAgICBkb21haW46IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIiA/IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RPTUFJTiA6IFwiXCIsXG4gICAgICAgICAgZXhwaXJlc0luOiBleHBpcmVzSW4gLyAxMDAwLFxuICAgICAgICB9O1xuICAgICAgICBzZXRDb29raWUoeyByZXMgfSwgXCJfX3Nlc3Npb25cIiwgc2Vzc2lvbkNvb2tpZSwgb3B0aW9ucyk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHsgc3RhdHVzOiBcInN1Y2Nlc3NcIiB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSxcbiAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiZ29pbmcgY3JhenlcIik7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKFwiVU5BVVRIT1JJWkVEIFJFUVVFU1QhXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgKVxuICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBoYW5kbGVyO1xuIl0sIm5hbWVzIjpbIlNlcnZlckluc3RhbmNlIiwic2V0Q29va2llIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImlkVG9rZW4iLCJib2R5IiwidG9TdHJpbmciLCJjb25zb2xlIiwibG9nIiwiZXhwaXJlc0luIiwiZmlyZWJhc2UiLCJhdXRoIiwiY3JlYXRlU2Vzc2lvbkNvb2tpZSIsInRoZW4iLCJzZXNzaW9uQ29va2llIiwib3B0aW9ucyIsIm1heEFnZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwicGF0aCIsImRvbWFpbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19ET01BSU4iLCJzdGF0dXMiLCJzZW5kIiwiZXJyb3IiLCJjYXRjaCIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/v3/customer/sessionLogin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/v3/customer/sessionLogin.ts"));
module.exports = __webpack_exports__;

})();